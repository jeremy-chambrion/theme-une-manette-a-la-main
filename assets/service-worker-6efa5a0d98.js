"use strict";var version="v1::",cacheName=version+"umalm",cacheHostnames=["fonts.googleapis.com","fonts.gstatic.com","gravatar.com"],cacheExtensions=["css","js","otf","eot","svg","ttf","woff","woff2","ico"],installDelayed=["/wp-content/themes/unemanettealamain/assets/logo/40x40.png","/wp-content/themes/unemanettealamain/assets/logo/150x150.png","/wp-content/themes/unemanettealamain/assets/logo/384x384.png"],installCritical=[],fetchCacheOrNetwork=function(t){return caches.open(cacheName).then(function(e){return e.match(t.request).then(function(e){return console.log("Service Worker - fetchCacheOrNetwork "+(e?"(cache)":"(network)"),t.request.url),e||fetch(t.request)})})},fetchCacheOrNetworkSave=function(r){return caches.open(cacheName).then(function(t){return t.match(r.request).then(function(e){return console.log("Service Worker - fetchCacheOrNetworkSave "+(e?"(cache)":"(network)"),r.request.url),e||fetch(r.request).then(function(e){return t.put(r.request,e.clone()),console.log("Service Worker - put into cache",r.request.url),e})})})},fetchStaleWhileRevalidate=function(o){return caches.open(cacheName).then(function(r){return r.match(o.request).then(function(e){var t=fetch(o.request).then(function(e){return r.put(o.request,e.clone()),console.log("Service Worker - put into cache",o.request.url),e});return console.log("Service Worker - fetchStaleWhileRevalidate "+(e?"(cache)":"(network)"),o.request.url),e||t})})},fetchNetworkSaveOrCache=function(r){return caches.open(cacheName).then(function(t){return fetch(r.request).then(function(e){return t.put(r.request,e.clone()),console.log("Service Worker - fetchNetworkSaveOrCache (network)",r.request.url),console.log("Service Worker - put into cache",r.request.url),e}).catch(function(){return console.log("Service Worker - fetchNetworkSaveOrCache (cache)",r.request.url),t.match(r.request)})})},fetchTimeoutNetworkSaveOrCache=function(c){return caches.open(cacheName).then(function(o){return o.match(c.request).then(function(e){if(!e)return console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e no cache found",c.request.url),fetchNetworkSaveOrCache(c);console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e cache found",c.request.url);var t=e.headers.get("date");if(!t)return console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e no header date found",c.request.url),fetchNetworkSaveOrCache(c);var r=(new Date).getTime()-new Date(t).getTime();return r?1728e5<r?(console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e header date > 2 days",t,r,c.request.url),fetchNetworkSaveOrCache(c)):(console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e header date < 2 days",t,r,c.request.url),Promise.race([new Promise(function(e,t){setTimeout(t,5e3)}),fetch(c.request)]).then(function(e){return console.log("Service Worker - fetchTimeoutNetworkSaveOrFallback (network)",c.request.url),console.log("Service Worker - put into cache",c.request.url),o.put(c.request,e.clone()),e}).catch(function(){return console.log("Service Worker - fetchTimeoutNetworkSaveOrFallback (cache)",c.request.url),e})):(console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e header date with empty time",t,r,c.request.url),fetchNetworkSaveOrCache(c))})})};self.addEventListener("install",function(e){console.log("Service Worker - Install"),e.waitUntil(caches.open(cacheName).then(function(e){return console.log("Service Worker - Install files"),e.addAll(installDelayed),e.addAll(installCritical)}).then(function(){return console.log("Service Worker - Install OK, skip waiting"),self.skipWaiting()}))}),self.addEventListener("activate",function(e){return console.log("Service Worker - Activate"),e.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(e){return console.log("Activate - key --\x3e",e),!e.startsWith(cacheName)}).map(function(e){return console.log("Service Worker - Delete key",e),caches.delete(e)}))})),self.clients.claim()}),self.addEventListener("fetch",function(e){if("GET"===e.request.method)if(e.request.url.match(/wp-admin/)||e.request.url.match(/preview=true/))console.log("Service worker - Admin page detected, fetch event ignored.",e.request.url);else{var t=new URL(e.request.url),r=t.pathname.split(".").pop();if(t.origin===location.origin){if("/"===t.pathname&&t.search.startsWith("?s="))return void console.log("Service Worker - Search results page detected, fetch event ignored.",e.request.url);if(-1<cacheExtensions.indexOf(r)){if(/\/unemanettealamain\/assets\/.*\-[a-z0-9]+\.[a-z0-9]+$/.test(t.pathname))return console.log("Service Worker - Found local asset with version in pathname",e.request.url),void e.respondWith(fetchCacheOrNetworkSave(e));var o=!1;if(t.searchParams.forEach(function(e,t){""!==e&&-1<["ver","v"].indexOf(t)&&(o=!0)}),o)return console.log("Service Worker - Found local asset with version in query string",e.request.url),void e.respondWith(fetchCacheOrNetworkSave(e))}if(/\/$/.test(t.pathname))return console.log("Service Worker - Found local static page",e.request.url),void e.respondWith(fetchTimeoutNetworkSaveOrCache(e))}for(var c=0;c<cacheHostnames.length;c++)if(-1<t.hostname.indexOf(cacheHostnames[c]))return console.log("Service Worker - Found external static URL",e.request.url),void e.respondWith(fetchCacheOrNetworkSave(e));if(-1<cacheExtensions.indexOf(t.pathname.split(".").pop()))return console.log("Service Worker - Found generic media extension",e.request.url),void e.respondWith(fetchStaleWhileRevalidate(e));console.log("Service Worker - Generic fallback",e.request.url),e.respondWith(fetchCacheOrNetwork(e))}else console.log("Service Worker - Method is not GET, fetch event ignored.",e.request.method,e.request.url)});
//# sourceMappingURL=service-worker-6efa5a0d98.js.map
