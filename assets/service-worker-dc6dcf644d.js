"use strict";var version="v1::",cacheName=version+"umalm",cacheHostnames=["fonts.googleapis.com","fonts.gstatic.com"],staleHostnames=["gravatar.com"],cacheExtensions=["css","js","otf","eot","svg","ttf","woff","woff2","ico"],installDelayed=["/wp-content/themes/unemanettealamain/assets/logo/40x40.png","/wp-content/themes/unemanettealamain/assets/logo/150x150.png","/wp-content/themes/unemanettealamain/assets/logo/384x384.png"],installCritical=[],fetchCacheOrNetwork=function(t){return caches.open(cacheName).then(function(e){return e.match(t.request).then(function(e){return console.log("Service Worker - fetchCacheOrNetwork "+(e?"(cache)":"(network)"),t.request.url),e||fetch(t.request)})})},fetchCacheOrNetworkSave=function(r){return caches.open(cacheName).then(function(t){return t.match(r.request).then(function(e){return console.log("Service Worker - fetchCacheOrNetworkSave "+(e?"(cache)":"(network)"),r.request.url),e||fetch(r.request).then(function(e){return t.put(r.request,e.clone()),console.log("Service Worker - put into cache",r.request.url),e})})})},fetchStaleWhileRevalidate=function(o){return caches.open(cacheName).then(function(r){return r.match(o.request).then(function(e){var t=fetch(o.request).then(function(e){return r.put(o.request,e.clone()),console.log("Service Worker - put into cache",o.request.url),e});return console.log("Service Worker - fetchStaleWhileRevalidate "+(e?"(cache)":"(network)"),o.request.url),e||t})})},fetchNetworkSaveOrCache=function(r){return caches.open(cacheName).then(function(t){return fetch(r.request).then(function(e){return t.put(r.request,e.clone()),console.log("Service Worker - fetchNetworkSaveOrCache (network)",r.request.url),console.log("Service Worker - put into cache",r.request.url),e}).catch(function(){return console.log("Service Worker - fetchNetworkSaveOrCache (cache)",r.request.url),t.match(r.request)})})},fetchTimeoutNetworkSaveOrCache=function(n){return caches.open(cacheName).then(function(o){return o.match(n.request).then(function(e){if(!e)return console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e no cache found",n.request.url),fetchNetworkSaveOrCache(n);console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e cache found",n.request.url);var t=e.headers.get("date");if(!t)return console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e no header date found",n.request.url),fetchNetworkSaveOrCache(n);var r=(new Date).getTime()-new Date(t).getTime();return r?1728e5<r?(console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e header date > 2 days",t,r,n.request.url),fetchNetworkSaveOrCache(n)):(console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e header date < 2 days",t,r,n.request.url),Promise.race([new Promise(function(e,t){setTimeout(t,5e3)}),fetch(n.request)]).then(function(e){return console.log("Service Worker - fetchTimeoutNetworkSaveOrFallback (network)",n.request.url),console.log("Service Worker - put into cache",n.request.url),o.put(n.request,e.clone()),e}).catch(function(){return console.log("Service Worker - fetchTimeoutNetworkSaveOrFallback (cache)",n.request.url),e})):(console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e header date with empty time",t,r,n.request.url),fetchNetworkSaveOrCache(n))})})};self.addEventListener("install",function(e){console.log("Service Worker - Install"),e.waitUntil(caches.open(cacheName).then(function(e){return console.log("Service Worker - Install files"),e.addAll(installDelayed),e.addAll(installCritical)}).then(function(){return console.log("Service Worker - Install OK, skip waiting"),self.skipWaiting()}))}),self.addEventListener("activate",function(e){return console.log("Service Worker - Activate"),e.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(e){return console.log("Activate - key --\x3e",e),!e.startsWith(cacheName)}).map(function(e){return console.log("Service Worker - Delete key",e),caches.delete(e)}))})),self.clients.claim()}),self.addEventListener("fetch",function(e){if("GET"===e.request.method)if(e.request.url.match(/wp-admin/)||e.request.url.match(/preview=true/))console.log("Service worker - Admin page detected, fetch event ignored.",e.request.url);else{var t,r=new URL(e.request.url),o=r.pathname.split(".").pop();if(r.origin===location.origin){if("/"===r.pathname&&r.search.startsWith("?s="))return void console.log("Service Worker - Search results page detected, fetch event ignored.",e.request.url);if(-1<cacheExtensions.indexOf(o)){if(/\/unemanettealamain\/assets\/.*\-[a-z0-9]+\.[a-z0-9]+$/.test(r.pathname))return console.log("Service Worker - Found local asset with version in pathname",e.request.url),void e.respondWith(fetchCacheOrNetworkSave(e));var n=!1;if(r.searchParams.forEach(function(e,t){""!==e&&-1<["ver","v"].indexOf(t)&&(n=!0)}),n)return console.log("Service Worker - Found local asset with version in query string",e.request.url),void e.respondWith(fetchCacheOrNetworkSave(e))}if(/\/$/.test(r.pathname))return console.log("Service Worker - Found local static page",e.request.url),void e.respondWith(fetchTimeoutNetworkSaveOrCache(e))}for(t=0;t<cacheHostnames.length;t++)if(-1<r.hostname.indexOf(cacheHostnames[t]))return console.log("Service Worker - Found external static URL",e.request.url),void e.respondWith(fetchCacheOrNetworkSave(e));for(t=0;t<staleHostnames.length;t++)if(-1<r.hostname.indexOf(staleHostnames[t]))return console.log("Service Worker - Found external static URL",e.request.url),void e.respondWith(fetchStaleWhileRevalidate(e));if(-1<cacheExtensions.indexOf(r.pathname.split(".").pop()))return console.log("Service Worker - Found generic media extension",e.request.url),void e.respondWith(fetchStaleWhileRevalidate(e));console.log("Service Worker - Generic fallback",e.request.url),e.respondWith(fetchCacheOrNetwork(e))}else console.log("Service Worker - Method is not GET, fetch event ignored.",e.request.method,e.request.url)});
//# sourceMappingURL=service-worker-dc6dcf644d.js.map
