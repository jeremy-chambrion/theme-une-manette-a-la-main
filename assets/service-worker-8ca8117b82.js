"use strict";var version="v1::",cacheName=version+"umalm",cacheHostnames=["fonts.googleapis.com","fonts.gstatic.com","gravatar.com"],cacheExtensions=["css","js","otf","eot","svg","ttf","woff","woff2","ico"],installDelayed=["/wp-content/themes/unemanettealamain/assets/logo/40x40.png","/wp-content/themes/unemanettealamain/assets/logo/150x150.png","/wp-content/themes/unemanettealamain/assets/logo/384x384.png","/wp-content/themes/unemanettealamain/assets/logo/600x600.png"],installCritical=[],fetchCacheOrNetwork=function(e){return caches.open(cacheName).then(function(t){return t.match(e.request).then(function(t){return console.log("Service Worker - fetchCacheOrNetwork "+(t?"(cache)":"(network)"),e.request.url),t||fetch(e.request)})})},fetchCacheOrNetworkSave=function(e){return caches.open(cacheName).then(function(t){return t.match(e.request).then(function(r){return console.log("Service Worker - fetchCacheOrNetworkSave "+(r?"(cache)":"(network)"),e.request.url),r||fetch(e.request).then(function(r){return t.put(e.request,r.clone()),console.log("Service Worker - put into cache",e.request.url),r})})})},fetchStaleWhileRevalidate=function(e){return caches.open(cacheName).then(function(t){return t.match(e.request).then(function(r){var o=fetch(e.request).then(function(r){return t.put(e.request,r.clone()),console.log("Service Worker - put into cache",e.request.url),r});return console.log("Service Worker - fetchStaleWhileRevalidate "+(r?"(cache)":"(network)"),e.request.url),r||o})})},fetchNetworkSaveOrCache=function(e){return caches.open(cacheName).then(function(t){return fetch(e.request).then(function(r){return t.put(e.request,r.clone()),console.log("Service Worker - fetchNetworkSaveOrCache (network)",e.request.url),console.log("Service Worker - put into cache",e.request.url),r}).catch(function(){return console.log("Service Worker - fetchNetworkSaveOrCache (cache)",e.request.url),t.match(e.request)})})},fetchTimeoutNetworkSaveOrCache=function(e){return caches.open(cacheName).then(function(t){return t.match(e.request).then(function(r){if(!r)return console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e no cache found",e.request.url),fetchNetworkSaveOrCache(e);console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e cache found",e.request.url);var o=r.headers.get("date");if(!o)return console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e no header date found",e.request.url),fetchNetworkSaveOrCache(e);var n=(new Date).getTime()-new Date(o).getTime();return n?n>1728e5?(console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e header date > 2 days",o,n,e.request.url),fetchNetworkSaveOrCache(e)):(console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e header date < 2 days",o,n,e.request.url),Promise.race([new Promise(function(e,t){setTimeout(t,5e3)}),fetch(e.request)]).then(function(r){return console.log("Service Worker - fetchTimeoutNetworkSaveOrFallback (network)",e.request.url),console.log("Service Worker - put into cache",e.request.url),t.put(e.request,r.clone()),r}).catch(function(){return console.log("Service Worker - fetchTimeoutNetworkSaveOrFallback (cache)",e.request.url),r})):(console.log("Service Worker - fetchTimeoutNetworkSaveOrCache --\x3e header date with empty time",o,n,e.request.url),fetchNetworkSaveOrCache(e))})})};self.addEventListener("install",function(e){console.log("Service Worker - Install"),e.waitUntil(caches.open(cacheName).then(function(e){return console.log("Service Worker - Install files"),e.addAll(installDelayed),e.addAll(installCritical)}).then(function(){return console.log("Service Worker - Install OK, skip waiting"),self.skipWaiting()}))}),self.addEventListener("activate",function(e){return console.log("Service Worker - Activate"),e.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(e){return console.log("Activate - key --\x3e",e),!e.startsWith(cacheName)}).map(function(e){return console.log("Service Worker - Delete key",e),caches.delete(e)}))})),self.clients.claim()}),self.addEventListener("fetch",function(e){if("GET"===e.request.method)if(e.request.url.match(/wp-admin/)||e.request.url.match(/preview=true/))console.log("Service worker - Admin page detected, fetch event ignored.",e.request.url);else{var t=new URL(e.request.url),r=t.pathname.split(".").pop();if(t.origin===location.origin){if("/"===t.pathname&&t.search.startsWith("?s="))return void console.log("Service Worker - Search results page detected, fetch event ignored.",e.request.url);if(cacheExtensions.indexOf(r)>-1){if(/\/unemanettealamain\/assets\/.*\-[a-z0-9]+\.[a-z0-9]+$/.test(t.pathname))return console.log("Service Worker - Found local asset with version in pathname",e.request.url),void e.respondWith(fetchCacheOrNetworkSave(e));var o=!1;if(t.searchParams.forEach(function(e,t){""!==e&&["ver","v"].indexOf(t)>-1&&(o=!0)}),o)return console.log("Service Worker - Found local asset with version in query string",e.request.url),void e.respondWith(fetchCacheOrNetworkSave(e))}if(/\/$/.test(t.pathname))return console.log("Service Worker - Found local static page",e.request.url),void e.respondWith(fetchTimeoutNetworkSaveOrCache(e))}for(var n=0;n<cacheHostnames.length;n++)if(t.hostname.indexOf(cacheHostnames[n])>-1)return console.log("Service Worker - Found external static URL",e.request.url),void e.respondWith(fetchCacheOrNetworkSave(e));if(cacheExtensions.indexOf(t.pathname.split(".").pop())>-1)return console.log("Service Worker - Found generic media extension",e.request.url),void e.respondWith(fetchStaleWhileRevalidate(e));console.log("Service Worker - Generic fallback",e.request.url),e.respondWith(fetchCacheOrNetwork(e))}else console.log("Service Worker - Method is not GET, fetch event ignored.",e.request.method,e.request.url)});
//# sourceMappingURL=service-worker-8ca8117b82.js.map
